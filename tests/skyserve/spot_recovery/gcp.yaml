resources:
  cloud: gcp
  use_spot: True
  accelerators: L4:4

workdir: sky/serve/examples/http_server

# Use 8080 to test jupyter service is terminated
run: |
  nvidia-smi
  python3 server.py --port 8080

service:
  port: 8080
  readiness_probe:
    path: /health
    initial_delay_seconds: 20
  controller_resources:
    cloud: gcp
  replica_policy:
    min_replicas: 3
    max_replicas: 3
    auto_restart: true

  spot_policy: SkymapFailover
  # zones: ['us-east1-c', 'us-central1-a', 'europe-west4-c', 'asia-east1-c']
  zones: ['asia-south1-a', 'us-central1-a', 'us-east1-b']
